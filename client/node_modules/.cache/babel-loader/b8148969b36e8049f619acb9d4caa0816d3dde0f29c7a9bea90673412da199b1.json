{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,Link}from\"react-router-dom\";import axios from\"axios\";import\"./OneProduct.css\";import Footer from\"../Footer/Footer\";import NavigationBar from\"../NavigationBar/NavigationBar\";import Slider from\"react-slick\";import{addToCart}from\"../CartUtils/addToCart\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OneProduct=()=>{const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[quantity,setQuantity]=useState(1);const[suggestions,setSuggestions]=useState([]);const{category,subCategory,id}=useParams();const handleAddToCart=product=>{console.log('Product being added:',product);if(product&&product._id){addToCart(product._id,quantity);}else{console.error('Invalid product or product ID');}};useEffect(()=>{const fetchProduct=async()=>{try{const baseUrl=process.env.REACT_APP_API_URL||\"http://localhost:5000\";const url=`${baseUrl}/api/products/${category}/${subCategory}/${id}`;const response=await axios.get(url);setProduct(response.data);setLoading(false);}catch(err){setError(`Failed to fetch product: ${err.message}`);setLoading(false);}};fetchProduct();},[category,subCategory,id]);useEffect(()=>{if(product&&product.brand){axios.get(\"https://designeral.onrender.com/api/products/suggestions\",{params:{brand:product.brand,currentProductId:product._id// Add this line\n}}).then(response=>setSuggestions(response.data)).catch(error=>{console.error(\"Error fetching suggestions:\",error);setSuggestions([]);});}},[product]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});if(!product)return/*#__PURE__*/_jsx(\"div\",{children:\"Product not found\"});const carouselSettings={dots:true,infinite:true,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]};return/*#__PURE__*/_jsxs(\"div\",{className:\"one-product-page\",children:[/*#__PURE__*/_jsx(NavigationBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"product-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[\"$\",product.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.max(quantity-1,1)),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(quantity+1),children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart-btn\",onClick:()=>handleAddToCart(product),children:\"Add to Cart\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"suggestions-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"suggestion-title\",children:\"From The Same Brand\"}),/*#__PURE__*/_jsx(Slider,{...carouselSettings,children:suggestions.length>0?suggestions.map(suggestion=>/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-item\",children:/*#__PURE__*/_jsxs(Link,{to:`/products/${suggestion.category}/${suggestion.subCategory}/${suggestion._id}`,children:[/*#__PURE__*/_jsx(\"img\",{src:suggestion.image,alt:suggestion.name,className:\"suggestion-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"suggestion-name\",children:suggestion.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"suggestion-price\",children:[\"$\",suggestion.price.toFixed(2)]})]})},suggestion._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No related products found at the moment.\"})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default OneProduct;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","Footer","NavigationBar","Slider","addToCart","jsx","_jsx","jsxs","_jsxs","OneProduct","product","setProduct","loading","setLoading","error","setError","quantity","setQuantity","suggestions","setSuggestions","category","subCategory","id","handleAddToCart","console","log","_id","fetchProduct","baseUrl","process","env","REACT_APP_API_URL","url","response","get","data","err","message","brand","params","currentProductId","then","catch","children","carouselSettings","dots","infinite","speed","slidesToShow","slidesToScroll","responsive","breakpoint","settings","className","src","image","alt","name","price","toFixed","description","onClick","Math","max","length","map","suggestion","to"],"sources":["C:/Users/user/Desktop/designeral/client/src/components/OneProduct/OneProduct.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./OneProduct.css\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport NavigationBar from \"../NavigationBar/NavigationBar\";\r\nimport Slider from \"react-slick\";\r\nimport { addToCart } from \"../CartUtils/addToCart\";\r\n\r\nconst OneProduct = () => {\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const { category, subCategory, id } = useParams();\r\n\r\n  const handleAddToCart = (product) => {\r\n    console.log('Product being added:', product);\r\n    if (product && product._id) {\r\n      addToCart(product._id, quantity);\r\n    } else {\r\n      console.error('Invalid product or product ID');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const baseUrl =\r\n          process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n        const url = `${baseUrl}/api/products/${category}/${subCategory}/${id}`;\r\n        const response = await axios.get(url);\r\n        setProduct(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(`Failed to fetch product: ${err.message}`);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [category, subCategory, id]);\r\n\r\n  useEffect(() => {\r\n    if (product && product.brand) {\r\n      axios\r\n        .get(\"https://designeral.onrender.com/api/products/suggestions\", {\r\n          params: {\r\n            brand: product.brand,\r\n            currentProductId: product._id // Add this line\r\n          }\r\n        })\r\n        .then((response) => setSuggestions(response.data))\r\n        .catch((error) => {\r\n          console.error(\"Error fetching suggestions:\", error);\r\n          setSuggestions([]);\r\n        });\r\n    }\r\n  }, [product]);\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n  if (!product) return <div>Product not found</div>;\r\n\r\n  const carouselSettings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 3,\r\n    slidesToScroll: 1,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: {\r\n          slidesToShow: 2,\r\n          slidesToScroll: 1,\r\n          infinite: true,\r\n          dots: true,\r\n        },\r\n      },\r\n      {\r\n        breakpoint: 600,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          slidesToScroll: 1,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div className=\"one-product-page\">\r\n      <NavigationBar />\r\n      <div className=\"product-details\">\r\n        <img src={product.image} alt={product.name} className=\"product-image\" />\r\n        <div className=\"product-info\">\r\n          <h1 className=\"product-name\">{product.name}</h1>\r\n          <p className=\"product-price\">${product.price.toFixed(2)}</p>\r\n          <p className=\"product-description\">{product.description}</p>\r\n          <div className=\"quantity-controls\">\r\n            <button onClick={() => setQuantity(Math.max(quantity - 1, 1))}>\r\n              -\r\n            </button>\r\n            <span>{quantity}</span>\r\n            <button onClick={() => setQuantity(quantity + 1)}>+</button>\r\n          </div>\r\n          <button className=\"add-to-cart-btn\" onClick={() => handleAddToCart(product)}>Add to Cart</button>\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"suggestions-section\">\r\n        <h2 className=\"suggestion-title\">From The Same Brand</h2>\r\n        <Slider {...carouselSettings}>\r\n          {suggestions.length > 0 ? (\r\n            suggestions.map((suggestion) => (\r\n              <div key={suggestion._id} className=\"suggestion-item\">\r\n                <Link\r\n                  to={`/products/${suggestion.category}/${suggestion.subCategory}/${suggestion._id}`}\r\n                >\r\n                  <img\r\n                    src={suggestion.image}\r\n                    alt={suggestion.name}\r\n                    className=\"suggestion-image\"\r\n                  />\r\n                  <h3 className=\"suggestion-name\">{suggestion.name}</h3>\r\n                  <p className=\"suggestion-price\">${suggestion.price.toFixed(2)}</p>\r\n                </Link>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>No related products found at the moment.</p>\r\n          )}\r\n        </Slider>\r\n      </section>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OneProduct;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}