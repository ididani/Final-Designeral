{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./Cards.css\";import{Link}from\"react-router-dom\";import{addToCart}from\"../CartUtils/addToCart\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cards=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const handleAddToCart=product=>{console.log('Product being added:',product);if(product&&product._id){addToCart(product._id,1);}else{console.error('Invalid product or product ID');}};useEffect(()=>{setLoading(true);axios.get(\"http://localhost:5000/api/products\").then(response=>{if(response.data&&Array.isArray(response.data)&&response.data.length>0){const sortedProducts=response.data.sort((a,b)=>(a.quantityStock||0)-(b.quantityStock||0));setProducts(sortedProducts.slice(0,4));}else{setError(\"No products available.\");setProducts([]);}}).catch(error=>{console.error(\"Error fetching products:\",error);setError(\"Failed to fetch products. Please try again later.\");setProducts([]);}).finally(()=>{setLoading(false);});},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"favorites-heading\",children:\"Last Chance to Buy\"}),products.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"favorites-container\",children:products.map(product=>{var _product$price;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(Link,{to:`/products/${product._id}`,className:\"card-link\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image||\"https://via.placeholder.com/300\",alt:product.name||\"Default Product\",className:\"card-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:/*#__PURE__*/_jsx(Link,{to:`/products/${product._id}`,className:\"card-link\",children:product.name||\"Name Unavailable\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-price\",children:[\"$\",((_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toFixed(2))||\"0.00\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-stock\",children:[\"Stock: \",product.quantityStock||\"N/A\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-to-cart\",onClick:()=>handleAddToCart(product),children:\"Add to Cart\"})]})]},product._id);})}):/*#__PURE__*/_jsx(\"p\",{children:\"No products available at the moment.\"})]});};export default Cards;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","addToCart","jsx","_jsx","jsxs","_jsxs","Cards","products","setProducts","loading","setLoading","error","setError","handleAddToCart","product","console","log","_id","get","then","response","data","Array","isArray","length","sortedProducts","sort","a","b","quantityStock","slice","catch","finally","children","className","map","_product$price","to","src","image","alt","name","price","toFixed","onClick"],"sources":["C:/Users/user/Desktop/designeral/client/src/components/Cards/Cards.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Cards.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { addToCart } from \"../CartUtils/addToCart\";\r\nconst Cards = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleAddToCart = (product) => {\r\n    console.log('Product being added:', product); \r\n    if (product && product._id) {\r\n      addToCart(product._id, 1);\r\n    } else {\r\n      console.error('Invalid product or product ID');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios\r\n      .get(\"http://localhost:5000/api/products\")\r\n      .then((response) => {\r\n        if (\r\n          response.data &&\r\n          Array.isArray(response.data) &&\r\n          response.data.length > 0\r\n        ) {\r\n          const sortedProducts = response.data.sort(\r\n            (a, b) => (a.quantityStock || 0) - (b.quantityStock || 0)\r\n          );\r\n          setProducts(sortedProducts.slice(0, 4));\r\n        } else {\r\n          setError(\"No products available.\");\r\n          setProducts([]);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching products:\", error);\r\n        setError(\"Failed to fetch products. Please try again later.\");\r\n        setProducts([]);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error-message\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3 className=\"favorites-heading\">Last Chance to Buy</h3>\r\n      {products.length > 0 ? (\r\n        <div className=\"favorites-container\">\r\n          {products.map((product) => (\r\n            <div key={product._id} className=\"card\">\r\n              <Link to={`/products/${product._id}`} className=\"card-link\">\r\n                <img\r\n                  src={product.image || \"https://via.placeholder.com/300\"}\r\n                  alt={product.name || \"Default Product\"}\r\n                  className=\"card-img\"\r\n                />\r\n              </Link>\r\n\r\n              <div className=\"card-content\">\r\n                <h3 className=\"card-title\">\r\n                  <Link to={`/products/${product._id}`} className=\"card-link\">\r\n                    {product.name || \"Name Unavailable\"}\r\n                  </Link>\r\n                </h3>\r\n                <p className=\"card-price\">\r\n                  ${product.price?.toFixed(2) || \"0.00\"}\r\n                </p>\r\n                <p className=\"card-stock\">\r\n                  Stock: {product.quantityStock || \"N/A\"}\r\n                </p>\r\n                <button\r\n                  className=\"btn-add-to-cart\"\r\n                  onClick={() => handleAddToCart(product)}\r\n                >\r\n                  Add to Cart\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p>No products available at the moment.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cards;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,aAAa,CACpB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACnD,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAgB,eAAe,CAAIC,OAAO,EAAK,CACnCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEF,OAAO,CAAC,CAC5C,GAAIA,OAAO,EAAIA,OAAO,CAACG,GAAG,CAAE,CAC1BhB,SAAS,CAACa,OAAO,CAACG,GAAG,CAAE,CAAC,CAAC,CAC3B,CAAC,IAAM,CACLF,OAAO,CAACJ,KAAK,CAAC,+BAA+B,CAAC,CAChD,CACF,CAAC,CAEDb,SAAS,CAAC,IAAM,CACdY,UAAU,CAAC,IAAI,CAAC,CAChBX,KAAK,CACFmB,GAAG,CAAC,oCAAoC,CAAC,CACzCC,IAAI,CAAEC,QAAQ,EAAK,CAClB,GACEA,QAAQ,CAACC,IAAI,EACbC,KAAK,CAACC,OAAO,CAACH,QAAQ,CAACC,IAAI,CAAC,EAC5BD,QAAQ,CAACC,IAAI,CAACG,MAAM,CAAG,CAAC,CACxB,CACA,KAAM,CAAAC,cAAc,CAAGL,QAAQ,CAACC,IAAI,CAACK,IAAI,CACvC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAACD,CAAC,CAACE,aAAa,EAAI,CAAC,GAAKD,CAAC,CAACC,aAAa,EAAI,CAAC,CAC1D,CAAC,CACDrB,WAAW,CAACiB,cAAc,CAACK,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CACzC,CAAC,IAAM,CACLlB,QAAQ,CAAC,wBAAwB,CAAC,CAClCJ,WAAW,CAAC,EAAE,CAAC,CACjB,CACF,CAAC,CAAC,CACDuB,KAAK,CAAEpB,KAAK,EAAK,CAChBI,OAAO,CAACJ,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDC,QAAQ,CAAC,mDAAmD,CAAC,CAC7DJ,WAAW,CAAC,EAAE,CAAC,CACjB,CAAC,CAAC,CACDwB,OAAO,CAAC,IAAM,CACbtB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAGN,GAAID,OAAO,CAAE,CACX,mBAAON,IAAA,QAAA8B,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,GAAItB,KAAK,CAAE,CACT,mBAAOR,IAAA,QAAK+B,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAEtB,KAAK,CAAM,CAAC,CACrD,CAEA,mBACEN,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAI+B,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAC,oBAAkB,CAAI,CAAC,CACxD1B,QAAQ,CAACiB,MAAM,CAAG,CAAC,cAClBrB,IAAA,QAAK+B,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CACjC1B,QAAQ,CAAC4B,GAAG,CAAErB,OAAO,OAAAsB,cAAA,oBACpB/B,KAAA,QAAuB6B,SAAS,CAAC,MAAM,CAAAD,QAAA,eACrC9B,IAAA,CAACH,IAAI,EAACqC,EAAE,CAAE,aAAavB,OAAO,CAACG,GAAG,EAAG,CAACiB,SAAS,CAAC,WAAW,CAAAD,QAAA,cACzD9B,IAAA,QACEmC,GAAG,CAAExB,OAAO,CAACyB,KAAK,EAAI,iCAAkC,CACxDC,GAAG,CAAE1B,OAAO,CAAC2B,IAAI,EAAI,iBAAkB,CACvCP,SAAS,CAAC,UAAU,CACrB,CAAC,CACE,CAAC,cAEP7B,KAAA,QAAK6B,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3B9B,IAAA,OAAI+B,SAAS,CAAC,YAAY,CAAAD,QAAA,cACxB9B,IAAA,CAACH,IAAI,EAACqC,EAAE,CAAE,aAAavB,OAAO,CAACG,GAAG,EAAG,CAACiB,SAAS,CAAC,WAAW,CAAAD,QAAA,CACxDnB,OAAO,CAAC2B,IAAI,EAAI,kBAAkB,CAC/B,CAAC,CACL,CAAC,cACLpC,KAAA,MAAG6B,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,GACvB,CAAC,EAAAG,cAAA,CAAAtB,OAAO,CAAC4B,KAAK,UAAAN,cAAA,iBAAbA,cAAA,CAAeO,OAAO,CAAC,CAAC,CAAC,GAAI,MAAM,EACpC,CAAC,cACJtC,KAAA,MAAG6B,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,SACjB,CAACnB,OAAO,CAACe,aAAa,EAAI,KAAK,EACrC,CAAC,cACJ1B,IAAA,WACE+B,SAAS,CAAC,iBAAiB,CAC3BU,OAAO,CAAEA,CAAA,GAAM/B,eAAe,CAACC,OAAO,CAAE,CAAAmB,QAAA,CACzC,aAED,CAAQ,CAAC,EACN,CAAC,GA3BEnB,OAAO,CAACG,GA4Bb,CAAC,EACP,CAAC,CACC,CAAC,cAENd,IAAA,MAAA8B,QAAA,CAAG,sCAAoC,CAAG,CAC3C,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}